deployed_server: true
overcloud_templates_path: /usr/share/openstack-tripleo-heat-templates
extra_tht_configs: /tmp/scripts/tht
enable_vbmc: false
use_external_images: false
overcloud_as_undercloud: false
chrooted: true
inject_instackenv: false
undercloud_undercloud_nameservers: 208.67.222.220
overcloud_dns_servers: "{{undercloud_undercloud_nameservers}}"
configure_repos: true
release: master
overcloud_release: "{{release}}"
gating_repo_enabled: false
dlrn_hash: current
repos:
  - type: generic
    reponame: delorean
    filename: delorean.repo
    baseurl: https://trunk.rdoproject.org/centos7-{{ release }}/{{ dlrn_hash }}/
    hash_url: https://trunk.rdoproject.org/centos7-{{ release }}/{{ dlrn_hash }}/delorean.repo
    priority: 20
  - type: file
    filename: delorean-deps.repo
    down_url: http://trunk.rdoproject.org/centos7-{{ release }}/delorean-deps.repo
repo_cmd_after: ''
undercloud_generate_service_certificate: false
undercloud_update_packages: "'*'"
undercloud_extra_services: >-
  -e {{overcloud_templates_path}}/environments/services-docker/undercloud-aodh.yaml
  -e {{overcloud_templates_path}}/environments/services-docker/undercloud-gnocchi.yaml
  -e {{overcloud_templates_path}}/environments/services-docker/undercloud-ceilometer.yaml
  -e {{ working_dir }}/network-environment.yaml
  -e {{working_dir}}/tht/environments/all-in-one.yaml
# FIXME(bogdando) after https://review.openstack.org/#/c/524114/ merged, add:
# -e {{overcloud_templates_path}}/environments/services-docker/undercloud-cinder.yaml
undercloud_extra_args: >-
  --timeout 90
  --heat-native
containerized_undercloud: true
step_install_undercloud: true
undercloud_install_script: undercloud-deploy.sh.j2
undercloud_docker_registry_host: docker.io
undercloud_docker_registry_namespace: tripleomaster
undercloud_docker_image_tag: current-tripleo
local_docker_registry_host: "{{ hostvars['undercloud'].undercloud_ip }}"
enable_pacemaker: false
overcloud_ipv6: false
enable_swap: false
ssl_overcloud: false
tempest_config: false
run_tempest: false
test_ping: false
step_introspect: false
extra_args_common: >-
  --ntp-server pool.ntp.org
validation_args: --disable-validations
deploy_composable_scenario: false
multinode_args: ""
use_resource_registry_nic_configs: true
undercloud_ip: "{{ hostvars['undercloud'].undercloud_ip }}"
network_isolation: false
# Host cloud private tenant networks CIDR, provisioned with Traas
undercloud_network_cidr: 192.168.0.0/24
undercloud_external_network_cidr: 192.168.253.0/24
external_network_cidr: "{{ undercloud_external_network_cidr }}"
overcloud_dns_servers:
  - "{{ undercloud_network_cidr|nthhost(2) }}"
  - 38.145.32.66
  - 38.145.32.79
network_environment_args:
  ExternalNetCidr: "{{ undercloud_external_network_cidr }}"
  ExternalAllocationPools: >
    [{'start': '{{ undercloud_external_network_cidr|nthhost(128) }}',
    'end': '{{ undercloud_external_network_cidr|nthhost(250) }}'}]
  NeutronExternalNetworkBridge: "''"
  ControlPlaneSubnetCidr: "{{ undercloud_network_cidr|ipaddr('prefix') }}"
  ControlPlaneDefaultRoute: "{{ undercloud_network_cidr|nthhost(1) }}"
  EC2MetadataIp: "{{ undercloud_ip }}"
  DnsServers: "{{ overcloud_dns_servers }}"
  NeutronPublicInterface: eth1
  HypervisorNeutronPublicInterface: eth1
