---
# Non local deployments by quickstart
- name: Install delorian repos
  hosts: undercloud
  any_errors_fatal: true
  gather_facts: false
  vars:
    repos:
      - type: tripleo-repos
        bundle: current
        release: master
  roles:
    - repo-setup

- name: Install the undercloud (oooq-extras)
  hosts: undercloud
  any_errors_fatal: true
  gather_facts: true
  become: false
  vars_files:
    - vars/undercloud-traas.yaml
  roles:
    - undercloud-deploy

# TODO install undercloud/overcloud with containers
# (extra_args: -e environments/docker.yaml, containerized_undercloud: true)
# see https://review.openstack.org/#/c/419040/ for undercloud
# Example vars:
#  vars:
#    extra_args: >
#      --control-scale 3
#      -e /usr/share/openstack-tripleo-heat-templates/environments/puppet-pacemaker.yaml
#      #OR for containers
#      -e environments/docker.yaml
#      --ntp-server pool.ntp.org
